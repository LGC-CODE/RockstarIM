<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <meta charset="utf-8">
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
    <script src="/javascripts/angular.js"></script>
    <script src="/javascripts/angular-ui-router.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <script src="/javascripts/angularApp.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
  </head>
  <body ng-app="RockstarIM">
  	<nav class="nav-full navbar navbar-default" ng-controller="NavCtrl">
	    <ul class="pull-right nav navbar-nav">
	      <li><a href="/#/Users">Home</a></li>
	      <li ng-show="isLoggedIn()"><a ng-click="reset()" href="#/RockstarIM/{{ profileId() }}">{{ currentUser().name }} <span class="nfy">{{ notify().notification }}</span></a></li>
	      <!-- <li ng-show="isLoggedIn();"><p class="nfy" ng-init="notify()" class="notify">{{ notify().notification }}</p></li>
 -->	      <li ng-show="isLoggedIn()"><a href="" ng-click="logOut()">Log Out</a></li>
	      <li ng-hide="isLoggedIn()"><a href="/#/login">Log In</a></li>
	      <li ng-hide="isLoggedIn()"><a href="/#/register">Register</a></li>
	    </ul>
	 </nav>
  	
  	<ui-view></ui-view>

	<script type="text/ng-template" id="/login.html">
		<div class="col-sm-offset-4 col-md-offset-4 col-xs-12 col-sm-4 col-md-4">
		  <div class="page-header">
		    <h1>RockstarIM</h1>
		  </div>

		  <div ng-show="error" class="alert alert-danger row">
		    <span>{{ error.message }}</span>
		  </div>

		  <form ng-submit="logIn()"
		    style="margin-top:30px;">
		    <h3>Log In</h3>

		    <div class="form-group">
		      <input type="text"
		      class="form-control"
		      placeholder="Username"
		      ng-model="user.username"></input>
		    </div>
		    <div class="form-group">
		      <input type="password"
		      class="form-control"
		      placeholder="Password"
		      ng-model="user.password"></input>
		    </div>
		    <button type="submit" class="btn btn-default">Log In</button>
		  </form>
		</div>

	 </script>
	<script type="text/ng-template" id="/register.html">
	<div class="container">
			<div class="page-header">
				<h1>RockstarIM</h1>
			</div>

			<div ng-show="error" class="alert alert-danger row">
				<span>{{ error.message }}</span>
			</div>

			<form ng-submit="register()" style="margin-top:30px;">
				<h3>Register</h3>

				<div class="form-group">
			  	    <input type="text" class="form-control" placeholder="Username" ng-model="user.username"></input>
				</div>
				<div class="form-group">
				    <input type="password" class="form-control" placeholder="Password" ng-model="user.password"></input>
				</div>
				<div class="form-group">
				    <input type="text" class="form-control" placeholder="Name to display" ng-model="user.name"></input>
				</div>	
				<div class="form-group">
				    <input type="text" class="form-control" placeholder="Age" ng-model="user.age"></input>
				</div>	

				<div class="form-group">
				    <input type="text" class="form-control" placeholder="Picture URL" ng-model="user.url"></input>
				</div>			
				<button type="submit" class="btn btn-default">Register</button>
		    </form>
	</div>
	</script>
	<script type='text/ng-template' id="/RockstarIM.html">
		<div class="container">
				<div class="col-sm-4 col-md-4">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">User</h3>
						</div>
						<div class="panel-body">
							<a href="{{ currentUser().picture }}" class="thumbnail">
								<img src="{{ currentUser().picture }}" />
							</a>
							<p>{{ currentUser().display }}</p>
					    	<p>{{ currentUser().age }}</p>
						</div>
						<div class="panel-footer">Host</div>
					</div>
				</div>
				
				<div class="col-sm-4 col-md-4">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Messages</h3>
						</div>
						<div class="panel-body">
							<div class="chatAdjust" ng-repeat="messages in message">
					  		<p>
					  			From: {{messages.fromUser}}
					  		</p>
					  		<p style="margin-left:10px;">
						  		{{ messages.text }}
						  	</p>
					  	</div>
						</div>
						<div class="panel-footer">
							<form ng-submit="addMessage()"	style="margin-top:31px;">
						  		<div class="form-group">
							    	<input class="form-control" type="text" placeholder="Message" ng-model="text"></input>			
							    </div>								    
								<button class="btn btn-chat" type="submit">Post</button>						   
							</form>
						</div>
					</div>
				</div>
				
				<div class="col-sm-4 col-md-4">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">User</h3>
						</div>
						<div class="panel-body">
							<a href="{{ user.pictureUrl }}" class="thumbnail">
								<img src="{{ user.pictureUrl }}" />
							</a>
							<p>{{ user.displayName }}</p>
					    	<p>{{ user.age }}</p>
						</div>
						<div class="panel-footer">Guest</div>
					</div>
				</div>
		</div>
    </script>
    <script type="text/ng-template" id="/users.html">
    	<div class="container">
    		<div ng-repeat="user in userReg" class="col-sm-4 col-md-4">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">User</h3>
					</div>
					<div class="panel-body">
						<a href="{{ user.pictureUrl }}" class="thumbnail thumbnail-cropped">
							<img src="{{ user.pictureUrl }}" />
						</a>
						<p>{{ user.displayName }}</p>
		    			<p>{{ user.age }}</p>
		    			<p>{{ user.email }}</p>
					</div>
					<div class="panel-footer">
						<div ng-show="isLoggedIn()">
			    			<a href="#/RockstarIM/{{ user._id }}"><button class="btn btn-default">Chat!</button></a>
			    		</div>
			    		<div ng-hide="isLoggedIn">Log in to begin chatting!</div>
					</div>
				</div>
			</div>
    	</div>
    </script>
  </body>

</html>
